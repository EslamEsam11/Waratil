<div class="player-container" *ngIf="playerService.currentTrack$ | async as track" dir="ltr">

  <div class="song-info">
   <img [src]="getReciterImage(track.reciterId)" alt="Reciter Photo">
    <div class="text-details">
      <div class="song-title">{{ track.reciterName }}</div>
      <div class="artist-name">{{ track.surahName }}</div>
    </div>
<button class="icon-button" 
        *ngIf="playerService.currentTrack$ | async as track"
        (click)="onToggleLike()">

  <i *ngIf="libraryService.isLiked(track)" class="fa-solid fa-heart" style="color: #1db954;     background: -webkit-linear-gradient(135deg, #450af5, #c4efd9);
    -webkit-background-clip: text;
    -webkit-text-fill-color: #ffffff00;"></i>

  <i *ngIf="!libraryService.isLiked(track)" class="fa-regular fa-heart"></i>
</button>
  </div>

  <div class="player-center">
<div class="player-buttons">
  <button class="icon-button secondary" [disabled]="!(playerService.currentTrack$ | async)">
    <i class="fa-solid fa-shuffle"></i>
  </button>
  
  <button class="icon-button secondary" 
          [disabled]="!(playerService.currentTrack$ | async)"
          (click)="playerService.playPrevious()">
    <i class="fa-solid fa-backward-step"></i>
  </button>
  
      <button class="icon-button play-button" (click)="playerService.togglePlayPause()">
        <i *ngIf="!(playerService.isPlaying$ | async)" class="fa-solid fa-play"></i>
        <i *ngIf="playerService.isPlaying$ | async" class="fa-solid fa-pause"></i>
      </button>
  
  <button class="icon-button secondary" 
          [disabled]="!(playerService.currentTrack$ | async)"
          (click)="playerService.playNext()">
    <i class="fa-solid fa-forward-step"></i>
  </button>

  <button class="icon-button secondary" [disabled]="!(playerService.currentTrack$ | async)">
    <i class="fa-solid fa-repeat"></i>
  </button>
</div>
<div class="progress-bar-wrapper">
      <span class="time">{{ playerService.currentTime$ | async }}</span>
      <div #progressBar class="progress-bar" (mousedown)="onSeekStart($event)">
        <div class="progress" [style.width.%]="playerService.progress$ | async"></div>
      </div>
      <span class="time">{{ playerService.duration$ | async }}</span>
    </div>
  </div>

<div class="player-right">
<div class="volume-control">
  <button class="icon-button secondary" (click)="playerService.toggleMute()">
    <i class="fa-solid"
       [class.fa-volume-high]="!(playerService.isMuted$ | async)"
       [class.fa-volume-xmark]="(playerService.isMuted$ | async)">
    </i>
  </button>
  <div #volumeBar class="progress-bar volume-bar" (mousedown)="onSetVolumeStart($event)">
    <div class="progress" [style.width.%]="(playerService.volume$ | async)! * 100"></div>
  </div>
</div>
    </div>
</div>

<div class="player-container placeholder" *ngIf="!(playerService.currentTrack$ | async)">
  <p>Select a track to start listening</p>
</div>


